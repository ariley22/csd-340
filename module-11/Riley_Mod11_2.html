<!-- Amanda Riley : Assignment 11.2 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>CSD 340 Development with HTML and CSS</title>
    <script>
        var toDoList = JSON.parse(localStorage.getItem('toDoList')) || [];
        var isDisplayed = false;

        function addItem(toDoItem){
            var listLength = toDoList.length;
            toDoList.push(toDoItem);
            localStorage.setItem('toDoList', JSON.stringify(toDoList));
            document.getElementById('textbox').value = "";

            if(document.getElementById('listDisplay').style.display === 'block'){
                isDisplayed = false;
                showList();
            }
        }

        function deleteItem(listIndex){
            toDoList.splice(listIndex, 1);
            localStorage.setItem('toDoList', JSON.stringify(toDoList));

            if(document.getElementById('listDisplay').style.display === 'block'){
                isDisplayed = false;
                showList();
            }
        }

        function showList(){
            var displayArea = document.getElementById('listDisplay');

            isDisplayed = !isDisplayed;

            if(isDisplayed) displayArea.style.display = 'block';
            else displayArea.style.display = 'none';

            if(toDoList.length == 0){
                displayArea.innerHTML = "";
                return;
            }

            var writeList = "<ol>";
            for(var i = 0; i < toDoList.length; ++i){
                writeList += "<li>" + toDoList[i] + "</li>";
                writeList += "<input type='button' value='Delete' data-index='" + i + "'onClick='deleteItem(this.dataset.index)'>"
            }
            writeList += "</ol>";
            displayArea.innerHTML = writeList;
        }
    </script>
</head>

<body>
<header>
    <h1 align="center">To-Do List</h1>
</header>
    <div id="container">
        <input type="text" id="textbox" onkeypress="if(event.key === 'Enter') addItem(this.value)">
        <input type="button" value="Add" onClick="addItem(document.getElementById('textbox').value)">
        <input type="button" value="Display" onClick="showList()">
        
        <div id="listDisplay"></div>
    </div>
</body>

</html>